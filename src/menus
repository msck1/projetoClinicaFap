//SISTEMA PARA IMPLEMENTAR E GERENCIAAR OS MÉDICOS, PACIENTES E CONSULTAS DE UMA CLÍNICA.

const readline = require('readline-sync');//permitir a interação síncrona com o usuário através do console

import readline from 'readline-sync';
import mysql from 'mysql2'
import { fazerConexao } from './db';

// Classe para gerenciar o sistema da clínica
class SistemaClinica {
    constructor() {
        this.medicos = [];
        this.pacientes = [];
        this.consultas = [];
    }

    menuPrincipal() {
        console.clear();
        console.log(" ================ FAP - FORMACAO ACELERADA DE PROGRAMACAO ===============");
        console.log(" =========  PROFESSOR: ANDRE RIBEIRO / DISCIPLINA: JAVA SCRIPT  =========");
        console.log(" ===================   S.G.C.->  SISTEMA DE GERENCIAMENTO DA CLINICA  FAP  ================ ");
        console.log(" OBJETIVO:Cadastrar,Consultar,Alterar,Remover:MÉDICOS/CONSULTAS/PACIENTES");
        console.log("\n ================  ESCOLHA UMA OPCAO VALIDA (0 à 3):   ============== \n");
        console.log("1 - MENU MÉDICO");
        console.log("2 - MENU PACIENTE");
        console.log("3 - MENU CONSULTA");
        console.log("0 - SAIR");

        let opcaomenu = readline.questionInt("\n Qual a opcao desejada? ");

        switch (opcaomenu) {
            case 1:
                this.menuMedico();
                break;
            case 2:
                this.menuPaciente();
                break;
            case 3:
                this.menuConsulta();
                break;
            case 0:
                console.log("Saída realizada com sucesso");
                return;
            default:
                console.log("Opção inválida. Escolha outra opção.");
                break;
        }
        this.menuPrincipal(); // Chama o menu novamente para nova escolha do usuário
    }

    // Menu para gerenciamento de médicos
    menuMedico() {
        console.log(" ============ SISTEMA DE CLINICA - MENU MÉDICO ============ ");
        console.log(" ============ ESCOLHA UMA OPCAO VALIDA(0 à 4): ===========\n");
        console.log("\n1 - Incluir Médico");
        console.log("2 - Alterar Médico");
        console.log("3 - Remover Médico");
        console.log("4 - Listar Médicos Cadastrados");
        console.log("0 - Sair");

        let opcaomenu = readline.questionInt("Qual a opcao desejada? ");

        switch (opcaomenu) {
            case 1:
                this.incluirMedico();
                break;
            case 2:
                this.alterarMedico();
                break;
            case 3:
                this.removerMedico();
                break;
            case 4:
                this.listarMedicos();
                break;
            case 0:
                console.log("Saida realizada com Sucesso");
                return;
            default:
                console.log("Opcao invalida. Escolha outra opcao.");
                break;
        }
        this.menuPrincipal(); // Chama o menu novamente para nova escolha do usuário
    }

    // Menu para gerenciamento de pacientes
    menuPaciente() {
        console.log(" ============ SISTEMA DE CLINICA - MENU PACIENTE ============ ");
        console.log(" ============ ESCOLHA UMA OPCAO VALIDA(0 à 4): ===========\n");
        console.log("\n1 - Incluir Paciente");
        console.log("2 - Alterar Paciente");
        console.log("3 - Remover Paciente");
        console.log("4 - Listar Pacientes Cadastrados");
        console.log("0 - Sair");

        let opcaomenu = readline.questionInt("Qual a opcao desejada? ");

        switch (opcaomenu) {
            case 1:
                this.incluirPaciente();
                break;
            case 2:
                this.alterarPaciente();
                break;
            case 3:
                this.removerPaciente();
                break;
            case 4:
                this.listarPacientes();
                break;
            case 0:
                console.log("Saida realizada com Sucesso");
                return;
            default:
                console.log("Opcao invalida. Escolha outra opcao.");
                break;
        }
        this.menuPrincipal(); // Chama o menu novamente para nova escolha do usuário
    }

    // Menu para gerenciamento de consultas
    menuConsulta() {
        console.log(" ============ SISTEMA DE CLINICA - MENU CONSULTA ============ ");
        console.log(" ============ ESCOLHA UMA OPCAO VALIDA(0 à 4): ===========\n");
        console.log("\n1 - Agendar Consulta");
        console.log("2 - Alterar Consulta");
        console.log("3 - Cancelar Consulta");
        console.log("4 - Listar Consultas Realizadas");
        console.log("0 - Sair");

        let opcaomenu = readline.questionInt("Qual a opcao desejada? ");

        switch (opcaomenu) {
            case 1:
                this.agendarConsulta();
                break;
            case 2:
                this.alterarConsulta();
                break;
            case 3:
                this.cancelarConsulta();
                break;
            case 4:
                this.listarConsultas();
                break;
            case 0:
                console.log("Saida realizada com Sucesso");
                return;
            default:
                console.log("Opcao invalida. Escolha outra opcao.");
                break;
        }
        this.menuPrincipal(); // Chama o menu novamente para nova escolha do usuário
    }
}
